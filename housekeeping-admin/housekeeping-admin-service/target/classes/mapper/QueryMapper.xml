<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.housekeeping.admin.mapper.QueryMapper">

    <select id="allCalendar" resultType="java.lang.Integer">
        select employees_id
        from employees_calendar
        group by employees_id
        having ''!=(
            select preset_job_ids
            from employees_details
            where id = employees_id
            )
    </select>
    <select id="allContract" resultType="java.lang.Integer">
        select employees_id
        from employees_contract
        group by employees_id
    </select>
    <select id="authOk" resultType="java.lang.Integer">
        select e.id
        from company_details c right join employees_details e on e.company_id = c.id
        where c.is_validate = true and c.is_personal = false;
    </select>
    <select id="authNo" resultType="java.lang.Integer">
        select e.id
        from company_details c right join employees_details e on e.company_id = c.id
        where c.is_validate = false and c.is_personal = false;
    </select>
    <select id="enableWork" resultType="java.lang.Integer">
                select employees_id
        from employees_calendar
        group by employees_id
        having ''!=(
            select preset_job_ids
            from employees_details
            where id = employees_id
            )
        union
        select employees_id
        from employees_contract
        group by employees_id;
    </select>

    <select id="allCalendar2" resultType="java.lang.Integer">
        select employees_id
        from employees_calendar
        group by employees_id
        having (
            select preset_job_ids
            from employees_details
            where id = employees_id
            )LIKE CONCAT('%',#{jobId},'%')
    </select>

    <select id="personal" resultType="java.lang.Integer">
         select e.id
        from company_details c right join employees_details e on e.company_id = c.id
        where c.is_personal = true;
    </select>
</mapper>
