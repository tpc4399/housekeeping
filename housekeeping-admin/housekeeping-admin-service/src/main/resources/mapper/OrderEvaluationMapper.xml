<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.housekeeping.admin.mapper.OrderEvaluationMapper">

	<update id="customerEvaluation">
		update order_evaluation
		set yes1 = true,
			star_rating1 = #{starRating},
			evaluation1 = #{evaluation},
			image_urls1 = #{imageUrls},
		    create_time1 = now()
		where order_number = #{orderNumber}
	</update>
	<update id="employeesEvaluation">
		update order_evaluation
		set yes2 = true,
			star_rating2 = #{starRating},
			evaluation2 = #{evaluation},
			image_urls2 = #{imageUrls},
			create_time2 = now()
		where order_number = #{orderNumber}
	</update>
	<update id="setOrderDetails">
		UPDATE order_details t SET t.order_state = 20 WHERE t.number = #{number}
	</update>
	<select id="getEvaluation" resultType="com.housekeeping.admin.entity.OrderEvaluation">
		select *
		from order_evaluation
		where order_number = #{orderNumber}
	</select>
</mapper>
